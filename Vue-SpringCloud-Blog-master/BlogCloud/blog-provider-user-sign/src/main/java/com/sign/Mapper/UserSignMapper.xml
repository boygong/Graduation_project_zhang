<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.sign.Mapper.UserSignMapper">
  <resultMap id="BaseResultMap" type="com.sign.Entity.UserSign">
    <!--@mbg.generated-->
    <id column="id" jdbcType="BIGINT" property="id" />
    <result column="Sign_id" jdbcType="BIGINT" property="signId" />
    <result column="Experience" jdbcType="BIGINT" property="experience" />
    <result column="Total_sign" jdbcType="BIGINT" property="totalSign" />
    <result column="Continue_sign" jdbcType="BIGINT" property="continueSign" />
    <result column="LastSignTime" jdbcType="TIMESTAMP" property="lastsigntime" />
    <result column="RecentSignTime" jdbcType="TIMESTAMP" property="recentsigntime" />
  </resultMap>
  <sql id="Base_Column_List">
    <!--@mbg.generated-->
    id, Sign_id, Experience, Total_sign, Continue_sign, LastSignTime, RecentSignTime
  </sql>
  <insert id="insert" keyColumn="id" keyProperty="id" parameterType="com.sign.Entity.UserSign" useGeneratedKeys="true">
    <!--@mbg.generated-->
    insert into user_sign (Sign_id, Experience, Total_sign, 
      Continue_sign, LastSignTime, RecentSignTime
      )
    values (#{signId,jdbcType=BIGINT}, #{experience,jdbcType=BIGINT}, #{totalSign,jdbcType=BIGINT}, 
      #{continueSign,jdbcType=BIGINT}, #{lastsigntime,jdbcType=TIMESTAMP}, #{recentsigntime,jdbcType=TIMESTAMP}
      )
  </insert>

<!--auto generated by MybatisCodeHelper on 2019-12-02-->
  <select id="selectContinueBySignId" resultType="java.lang.Long">
    select Continue_sign
    from user_sign
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </select>

<!--auto generated by MybatisCodeHelper on 2019-12-02-->
  <update id="updateFirstExperienceBySignId">
    update user_sign
    set Experience=3, Total_sign=1,
    Continue_sign=1
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-02-->
  <update id="updateFirstExperienceVipBySignId">
    update user_sign
    set Experience=15, Total_sign=1,
    Continue_sign=1
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-02-->
  <update id="updateFirstExperienceSvipBySignId">
    update user_sign
    set Experience=30, Total_sign=1,
    Continue_sign=1
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

<!--auto generated by MybatisCodeHelper on 2019-12-02-->
  <select id="selectRecentsigntimeBySignId" resultType="java.util.Date">
    select RecentSignTime
    from user_sign
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </select>

<!--auto generated by MybatisCodeHelper on 2019-12-02-->
  <update id="updateOverExperienceBySignId">
    update user_sign
    set Experience=Experience+3, Total_sign=Total_sign+1,
    Continue_sign=1
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <update id="callExperience" parameterType="integer" statementType="CALLABLE">
    {call updateSign(#{id,mode=IN})}
  </update>

  <update id="callVipExperience" parameterType="integer" statementType="CALLABLE">
    {call updateSignVip(#{id,mode=IN})}
  </update>

  <update id="callSvipExperience" parameterType="integer" statementType="CALLABLE">
    {call updateSignSvip(#{id,mode=IN})}
  </update>


  <!--auto generated by MybatisCodeHelper on 2019-12-02-->
  <select id="selectExperienceBySignId" resultType="java.lang.Long">
    select Experience
    from user_sign
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </select>

<!--auto generated by MybatisCodeHelper on 2019-12-04-->
  <select id="selectAllBySignId" resultMap="BaseResultMap">
    select
    <include refid="Base_Column_List"/>
    from user_sign
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </select>

<!--auto generated by MybatisCodeHelper on 2019-12-05-->
  <select id="selectExperience" resultType="java.lang.Long">
    select Experience
    from user_sign
    where Experience is not null;
  </select>

<!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <select id="selectIdBySignId" resultType="java.lang.Long">
    select id
    from user_sign
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </select>

<!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateContinueOneBySignId">
    update user_sign
    set Experience=Experience+20
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateContinueTwoBySignId">
    update user_sign
    set Experience=Experience+30
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateContinueFiveBySignId">
    update user_sign
    set Experience=Experience+500
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

<!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <select id="selectTotalSignBySignId" resultType="java.lang.Long">
    select Total_sign
    from user_sign
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </select>

  <!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateTotalOneBySignId">
    update user_sign
    set Experience=Experience+100
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateTotalTwoBySignId">
    update user_sign
    set Experience=Experience+200
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateTotalThreeBySignId">
    update user_sign
    set Experience=Experience+300
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateTotalFiveBySignId">
    update user_sign
    set Experience=Experience+500
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateTotalSixBySignId">
    update user_sign
    set Experience=Experience+2000
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

  <!--auto generated by MybatisCodeHelper on 2019-12-09-->
  <update id="updateTotalSevenBySignId">
    update user_sign
    set Experience=Experience+5000
    where 1=1
    <if test="id != null">
      and Sign_id=#{id,jdbcType=BIGINT}
    </if>
  </update>

<!--auto generated by MybatisCodeHelper on 2020-05-27-->
  <update id="updateExperienceById">
    update user_sign
    set Experience=#{updatedExperience,jdbcType=BIGINT}
    <where>
      <if test="id != null">
        and id=#{id,jdbcType=BIGINT}
      </if>
    </where>
  </update>

<!--auto generated by MybatisCodeHelper on 2020-05-28-->
  <update id="updateExperienceBySignId">
        update user_sign
        set Experience=Experience+
        <where>
            <if test="signId != null">
                and Sign_id=#{signId,jdbcType=BIGINT}
            </if>
        </where>
    </update>
</mapper>